<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Hawaii PPP Loan Data</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-array@3"></script>
    <link rel="stylesheet" href="style.css" />
    <style>
      rect {
        cursor: pointer;
        stroke-width: 2;
      }
      rect.disabled {
        fill: transparent !important;
      }
      #chart {
        margin: 0;
        position: relative;
        display: block;
      }
      .tooltip {
        background: #eee;
        box-shadow: 0 0 5px #999999;
        color: #333;
        display: none;
        font-size: 16px;
        left: 130px;
        padding: 10px;
        position: absolute;
        text-align: center;
        top: 95px;
        width: 175px;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="navigation">
        <h2>Hawaii PPP Loan Data</h2>
        <div class="description">
          <p>
            As part of the 2020 CARES Act, the Paycheck Protection Program (PPP)
            were government-backed loans made by banks to businesses during the
            COVID-19 crisis. This
            <a
              href="https://publicaccountability.org/datasets/358/ppp-loans/"
              target="_blank"
              >dataset</a
            >
            specifically looks at loans approved between April - August 2020 to
            businesses in Hawaii.
          </p>
        </div>
        <div class="pagination">
          <a href="slide2.html">&laquo;</a>
          <a href="index.html">1</a>
          <a href="slide2.html">2</a>
          <a href="slide3.html" class="active">3</a>
          <a href="slide3.html" class="disabled">&raquo;</a>
        </div>
      </div>
      <div id="content">
        <h4>Business Categories and Jobs Retention</h4>
      </div>
    </div>
    <script>
      const chart = (selector, data) => {
        const container = d3.select(selector);

        // Specify the chartâ€™s dimensions.
        const width = 800;
        const height = 300;
        const marginTop = 25;
        const marginRight = 25;
        const marginBottom = 25;
        const marginLeft = 25;

        // Define the horizontal scale.
        const x = d3
          .scaleLinear()
          .domain([0, 150000])
          .range([marginLeft, width - marginRight]);

        // Define the vertical scale.
        const y = d3
          .scaleLinear()
          .domain([0, 510])
          .range([height - marginBottom, marginTop]);

        var color = d3.scaleOrdinal(d3.schemeCategory20c);

        // Create the container SVG.
        const svg = container
          .append("svg")
          .attr("width", width)
          .attr("height", height)
          .attr("viewBox", [0, 0, width, height])
          .attr("style", "max-width: 100%; height: auto;");

        // Add the axes.
        svg
          .append("g")
          .attr("transform", `translate(0,${height - marginBottom})`)
          .call(d3.axisBottom(x));

        svg
          .append("g")
          .attr("transform", `translate(${marginLeft},0)`)
          .call(d3.axisLeft(y));

        // Append a circle for each data point.
        svg
          .append("g")
          .selectAll("circle")
          .data(data)
          .enter()
          .append("circle")
          .attr("cx", (d) => x(d.LoanAmount))
          .attr("cy", (d) => y(d.JobsReported))
          .attr("r", 1)
          .attr("fill", (d) => color(d.NAICSCodeDefinition));
      };

      d3.csv("https://kharissa.github.io/cs416/data.csv", function (csvData) {
        chart("#content", csvData);
      });
    </script>
  </body>
</html>
